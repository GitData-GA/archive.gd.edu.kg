function loadOboe(callback) {
    const script = document.createElement("script");
    script.src = "./assets/oboe-browser.min.js";  // Load from the same folder
    script.onload = callback;
    script.onerror = function () {
        console.error("Failed to load Oboe.js. Make sure oboe-browser.min.js is in the correct directory.");
    };
    document.head.appendChild(script);
}

function formatDateTime(date) {
    return date.toISOString().replace('T', ' ').split('.')[0] + ' UTC';
}

function getQueryParams() {
    const urlParams = new URLSearchParams(window.location.search);
    return {
        preprintID: urlParams.get('preprintID'),
        version: urlParams.get('version')
    };
}

function extractPreprintID(url) {
    const match = url.match(/https:\/\/archive\.gd\.edu\.kg\/(\d+)/);
    return match ? match[1] : null;
}

function checkForUpdate() {
    const { preprintID, version } = getQueryParams();
    if (!preprintID && !version) {
        document.getElementById('statusImg').innerHTML = `<img src="data:image/png;base64,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" width="64px" alt="check for update icon" />`;
        document.getElementById('update-message').innerHTML = `<h2 style="font-family: Afacad_Bold; font-size: 20px; text-align: center;">
            This page allows you to verify the latest available version of a specific preprint document by having two key pieces of information: the preprint ID and the version number. Simply click on the blue bookmark on the top left corner in any preprint at GitData Archive, and it will take you to its version check.
        </h2>`;
        return;
    }

    let matchedPreprints = [];
    let latestVersion = null;
    let foundMatch = false;

    oboe('https://archive.gd.edu.kg/info.json')
        .node('!.*', function (item) {
            if (extractPreprintID(item.url) === preprintID) {
                matchedPreprints.push(item);
                matchedPreprints.sort((a, b) => new Date(b.publication_date) - new Date(a.publication_date));
                
                if (!latestVersion) latestVersion = matchedPreprints[0];
                if (item.version === version) foundMatch = true;
            }
            return oboe.drop; // Drop processed items to save memory
        })
        .done(function () {
            if (matchedPreprints.length === 0 || !foundMatch) {
                document.getElementById('update-message').innerHTML = `<h2 style="font-family: Afacad_Bold; font-size: 20px; text-align: center;">
                    No document found. Please double-check your query.<br>Your query detail:<br>Preprint ID: ${preprintID}<br>Version: ${version}
                </h2>`;
                document.getElementById('statusImg').innerHTML = `<svg viewBox="0 0 117 117" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title></title> <desc></desc> <defs></defs> <g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"> <g fill-rule="nonzero" id="cancel"> <path d="M58.5,116.6 C90.5,116.6 116.6,90.6 116.6,58.5 C116.6,26.4 90.5,0.4 58.5,0.4 C26.5,0.4 0.4,26.5 0.4,58.5 C0.4,90.5 26.5,116.6 58.5,116.6 Z M58.5,8.6 C86,8.6 108.4,31 108.4,58.5 C108.4,86 86,108.4 58.5,108.4 C31,108.4 8.6,86 8.6,58.5 C8.6,31 31,8.6 58.5,8.6 Z" fill="#1b86b9" id="Shape"></path> <path d="M36.7,79.7 C37.5,80.5 38.5,80.9 39.6,80.9 C40.7,80.9 41.7,80.5 42.5,79.7 L58.5,63.7 L74.5,79.7 C75.3,80.5 76.3,80.9 77.4,80.9 C78.5,80.9 79.5,80.5 80.3,79.7 C81.9,78.1 81.9,75.5 80.3,73.9 L64.3,57.9 L80.3,41.9 C81.9,40.3 81.9,37.7 80.3,36.1 C78.7,34.5 76.1,34.5 74.5,36.1 L58.5,52.1 L42.5,36.1 C40.9,34.5 38.3,34.5 36.7,36.1 C35.1,37.7 35.1,40.3 36.7,41.9 L52.7,57.9 L36.7,73.9 C35.1,75.5 35.1,78.1 36.7,79.7 Z" fill="#ff0000" id="Shape"></path> </g> </g> </g></svg>`;
                return;
            }

            const isLatest = latestVersion.version === version;
            document.getElementById('update-message').innerHTML = `<h2 style="font-family: Afacad_Bold; font-size: 20px; text-align: center;">
                You are viewing ${isLatest ? 'the latest' : `an older (${version})`} version of the document.
            </h2>`;
            const updateStatusImg = isLatest 
                ? `<svg viewBox="0 0 117 117" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title></title> <desc></desc> <defs></defs> <g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"> <g fill-rule="nonzero" id="correct"> <path d="M34.5,55.1 C32.9,53.5 30.3,53.5 28.7,55.1 C27.1,56.7 27.1,59.3 28.7,60.9 L47.6,79.8 C48.4,80.6 49.4,81 50.5,81 C50.6,81 50.6,81 50.7,81 C51.8,80.9 52.9,80.4 53.7,79.5 L101,22.8 C102.4,21.1 102.2,18.5 100.5,17 C98.8,15.6 96.2,15.8 94.7,17.5 L50.2,70.8 L34.5,55.1 Z" fill="#17AB13" id="Shape"></path> <path d="M89.1,9.3 C66.1,-5.1 36.6,-1.7 17.4,17.5 C-5.2,40.1 -5.2,77 17.4,99.6 C28.7,110.9 43.6,116.6 58.4,116.6 C73.2,116.6 88.1,110.9 99.4,99.6 C118.7,80.3 122,50.7 107.5,27.7 C106.3,25.8 103.8,25.2 101.9,26.4 C100,27.6 99.4,30.1 100.6,32 C113.1,51.8 110.2,77.2 93.6,93.8 C74.2,113.2 42.5,113.2 23.1,93.8 C3.7,74.4 3.7,42.7 23.1,23.3 C39.7,6.8 65,3.9 84.8,16.2 C86.7,17.4 89.2,16.8 90.4,14.9 C91.6,13 91,10.5 89.1,9.3 Z" fill="#1b86b9" id="Shape"></path> </g> </g> </g></svg>` 
                : `<svg viewBox="0 0 22 22" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" id="svg2" version="1.1" inkscape:version="0.92.1 r15371" sodipodi:docname="dark_warning.svg" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <defs id="defs4"> <linearGradient gradientUnits="userSpaceOnUse" y2="2" x2="16" y1="29.999973" x1="16" id="linearGradient4144" xlink:href="#linearGradient4155" inkscape:collect="always" gradientTransform="matrix(1.66667 0 0 -1.66667 -15.667 1064.696)"></linearGradient> <linearGradient inkscape:collect="always" id="linearGradient4155"> <stop style="stop-color:#fcd994;stop-opacity:1" offset="0" id="stop4157"></stop> <stop style="stop-color:#fff6e1;stop-opacity:1" offset="1" id="stop4159"></stop> </linearGradient> </defs> <sodipodi:namedview id="base" pagecolor="" bordercolor="#1b86b9" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="-8.3436117" inkscape:cy="10.155389" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="true" inkscape:showpageshadow="false" borderlayer="true" inkscape:window-width="1884" inkscape:window-height="1051" inkscape:window-x="0" inkscape:window-y="0" inkscape:window-maximized="1" units="px"> <sodipodi:guide position="2,20.000017" orientation="18,0" id="guide4085" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="2,2.0000174" orientation="0,18" id="guide4087" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="20,2.0000174" orientation="-18,0" id="guide4089" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="20,20.000017" orientation="0,-18" id="guide4091" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="3,19.000017" orientation="16,0" id="guide4093" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="3,3.0000174" orientation="0,16" id="guide4095" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="19,3.0000174" orientation="-16,0" id="guide4097" inkscape:locked="false"></sodipodi:guide> <sodipodi:guide position="19,19.000017" orientation="0,-16" id="guide4099" inkscape:locked="false"></sodipodi:guide> <inkscape:grid type="xygrid" id="grid4101"></inkscape:grid> </sodipodi:namedview> <metadata id="metadata7"> <rdf:rdf> <cc:work> <dc:format>image/svg+xml</dc:format> <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type> <dc:title></dc:title> <dc:creator> <cc:agent> <dc:title>Timothée Giet</dc:title> </cc:agent> </dc:creator> <dc:date>2017</dc:date> <cc:license rdf:resource="http://creativecommons.org/licenses/by-sa/4.0/"></cc:license> </cc:work> <cc:license rdf:about="http://creativecommons.org/licenses/by-sa/4.0/"> <cc:permits rdf:resource="http://creativecommons.org/ns#Reproduction"></cc:permits> <cc:permits rdf:resource="http://creativecommons.org/ns#Distribution"></cc:permits> <cc:requires rdf:resource="http://creativecommons.org/ns#Notice"></cc:requires> <cc:requires rdf:resource="http://creativecommons.org/ns#Attribution"></cc:requires> <cc:permits rdf:resource="http://creativecommons.org/ns#DerivativeWorks"></cc:permits> <cc:requires rdf:resource="http://creativecommons.org/ns#ShareAlike"></cc:requires> </cc:license> </rdf:rdf> </metadata> <g inkscape:label="Capa 1" inkscape:groupmode="layer" id="layer1" transform="translate(0 -1030.362)"> <path style="fill:#1b86b9;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m11 1032.362-10 18h20zm0 2 8 15H3z" id="path839" inkscape:connector-curvature="0" sodipodi:nodetypes="cccccccc"></path> <path style="fill:#ffa200;fill-opacity:.94117647;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M10 1046.362h2v2h-2z" id="path844" inkscape:connector-curvature="0"></path> <path style="fill:#ffa200;fill-opacity:.94117647;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M10 1045.362h2v-6h-2z" id="path846" inkscape:connector-curvature="0" sodipodi:nodetypes="ccccc"></path> </g> </g></svg>`;
            document.getElementById('statusImg').innerHTML = updateStatusImg;

            document.getElementById('query-time').innerHTML = `<center><p>Query executed at: ${formatDateTime(new Date())}</p></center>`;

            let resultsContainer = document.getElementById('searchResults');
            resultsContainer.innerHTML = `<p>Available version(s):</p>`;
            matchedPreprints.forEach(paper => {
                let truncatedAbstract = paper.abstract.split(' ').slice(0, 75).join(' ') + (paper.abstract.length > 75 ? '...' : '');
                let preprintID = paper.url.substring(8);
                let authorsString = paper.authors.join(', ');

                let resultDiv = document.createElement('li');
                resultDiv.innerHTML = `
                    <p><a href="${paper.url}">${preprintID}</a>&nbsp;&nbsp;<span class="article-tag">${paper.subject}</span> (${paper.version})</p>
                    <b><p>${paper.title}</p></b>
                    <p><b>Submission date</b>: ${paper.publication_date}</p>
                    <p><b>Author</b>: ${authorsString}</p> 
                    <p><b>Abstract</b>: ${truncatedAbstract}</p>
                    <hr>
                `;
                resultsContainer.appendChild(resultDiv);
            });
        });
}

// Load Oboe.js first, then execute the script
loadOboe(checkForUpdate);
